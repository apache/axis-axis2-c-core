<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <title>Axis2 User's Guide</title>
  <meta name="generator" content="amaya 9.2.2, see http://www.w3.org/Amaya/">
</head>

<body dir="ltr" lang="en-US">
<h3><a name="Axis2_User's_Guide">Axis2/C User's Guide</a></h3>

<h4>-Milestone Release 0.5</h4>

<p align="right">Pages: <a href="userguide.html">Content</a>, <a
href="userguide1.html">1</a>, <a href="userguide2.html">2</a>, <b>3</b></p>

<p><strong>User Feedback</strong>: <a
href="mailto:axis-user@ws.apache.org">axis-c-user@ws.apache.org</a> (Please
remember to prefix the subject with [Axis2]). To subscribe to mailing list
see <a href="../mail-lists.html">here.</a></p>
<a name="Conventions"></a>

<h3>Conventions used in the document:</h3>

<p>From here onwards this document will refer to the folder where Axis2/C
binary is installed as AXIS2C_HOME</p>

<p>In this section of user's guide we will look at how to write and deploy a
Web Services using Axis2/C. All the user guide samples are located in the
<b>"samples"</b> directory of the binary distribution.</p>

<h2><a name="Web_Services_Using_Axis2">Web Services Using Axis2/C</a></h2>

<p>Before starting, please make sure that you have installed Axis2/C
correctly and check whether you can run the axis2_http_server located in
AXIS2C_HOME/bin . (See <a href="installationguide.html"
target="_blank">Installation Guide</a>).</p>

<h3><a name="Writing_Web_Services_Using Axis2_C">Writing Web Services Using
Axis2/C</a></h3>

<h4><a name="Creating_Web_Service__MyService_">Creating Web Service (Echo
service)</a></h4>

<p>First let's see how we can write a simple Web Service (echo service) using
Axis2/C's primary interfaces and deploy it. For this purpose we will create a
Web Service with one operation as follows.</p>
<pre><font color="#009900">/* IN-OUT operation, accepts an om element node and responds with another om element node after <br> *  processing <br> */ </font><br>axis2_om_node_t* axis2_echo_echo(axis2_om_node_t *echo_node){}<br> </pre>

<p>You can have peek at the complete source code for this example echo
service located in the "AXIS2C_HOME/samples/server/echo" directory .</p>

<h4><a name="How_to_write_the_Web_Service_">How to write the Web
Service?</a></h4>
Writing a new Web Service with Axis2/C involve four steps.

<p>(eg . echo service )</p>
<ol>
  <li><p style="margin-bottom: 0in;">Write a echo_skeleton.c file which
    implements the API given inaxis2_svc_skeleton.h header file.</p>
  </li>
  <li>Write the service implementation source file file (in this case echo.c
    service) which implements the actual business logic.</li>
  <li>Write a services.xml file to explain the Web Service.</li>
  <li>Create a folder with the service name under AXIS2C_HOME/services and
    put the compiled service ( .dll or .so file) for the Web Service and
    services.xml file in to that folder</li>
</ol>
<a name="Step1"></a>

<h4>Step1 :Write the echo_skeleton.c file implementing the
axis2_svc_skeleton.h</h4>

<p>axis2_svc_skeleton.h header file has the axis2_svc_skeleton_ops_t
operations struct which defines four function pointers to be implemented and
assigned by a service skeleton.</p>

<p>They are:-</p>
<pre class="code"><font color="#808080"><i>/* initialize the service */</i></font>
int (AXIS2_CALL * init) (axis2_svc_skeleton_t *svc_skeleton,
                         axis2_env_t **env);
<font color="#808080"><i>/* invoke the service */</i></font>
axis2_om_node_t * (AXIS2_CALL* invoke)(axis2_svc_skeleton_t *svc_skeli, 
                    axis2_env_t **env, axis2_om_node_t *node);
<font color="#808080"><i>/*on a fault, this function is called */</i></font>
axis2_om_node_t *(AXIS2_CALL* on_fault)(axis2_svc_skeleton_t *svc_skeli,
                    axis2_env_t **env, axis2_om_node_t *node);
<font color="#808080"><i>/*deallocate the memory */</i></font>
int (AXIS2_CALL *free)(axis2_svc_skeleton_t *svc_skeli, 
                       axis2_env_t **env);</pre>

<p>Lets implement the above functions for echo service.</p>

<p><font color="#808080"><i>/* Initialize the service */</i></font><br>
<font color="#800000">int</font> <font color="#000000">AXIS2_CALL</font><br>
<font color="#000000">echo_init</font>(<font
color="#000000">axis2_svc_skeleton_t</font> *<font
color="#000000">svc_skeleton</font>,<br>
                        <font color="#000000">axis2_env_t</font> **<font
color="#000000">env</font>)<br>
{<br>
    <font color="#000000">svc_skeleton</font>-&gt;<font
color="#000000">func_array</font> = <font
color="#000000">axis2_array_list_create</font>(<font
color="#000000">env</font>, <font color="#0000FF">0</font>);<br>
    <font
color="#808080"><i>/* Add the implemented operation names of the service to  <br>
     * the array list of functions <br>
     */</i></font><br>
    <font color="#000000">AXIS2_ARRAY_LIST_ADD</font>(<font
color="#000000">svc_skeleton</font>-&gt;<font
color="#000000">func_array</font>, <font color="#000000">env</font>, <font
color="#FF0000">"echoString"</font>);<br>
    <font
color="#808080"><i>/* Any initialization stuff of echo service should go here */</i></font><br>
    <font color="#000000"><b>return</b></font> <font
color="#000000">AXIS2_SUCCESS</font>;<br>
}<br>
<br>
<font color="#808080"><i>/*<br>
 * This method invokes the right service method <br>
 */</i></font><br>
<font color="#000000">axis2_om_node_t</font>* <font
color="#000000">AXIS2_CALL</font><br>
<font color="#000000">echo_invoke</font>(<font
color="#000000">axis2_svc_skeleton_t</font> *<font
color="#000000">svc_skeleton</font>,<br>
            <font color="#000000">axis2_env_t</font> **<font
color="#000000">env</font>,<br>
            <font color="#000000">axis2_om_node_t</font> *<font
color="#000000">node</font>)<br>
{<br>
    <font color="#808080"><i>/* Invoke the business logic.<br>
     * Depending on the function name invoke the correct impl method.<br>
     * We have only echo in this sample, hence invoke echo method.<br>
     * To see how to deal with multiple impl methods, have a look at the<br>
     * math sample.<br>
     */</i></font><br>
    <font color="#000000"><b>return</b></font> <font
color="#000000">axis2_echo_echo</font>(<font
color="#000000">env</font>, <font color="#000000">node</font>);<br>
}<br>
<br>
<font color="#808080"><i>/* On fault, handle the fault */</i></font><br>
<font color="#000000">axis2_om_node_t</font>* <font
color="#000000">AXIS2_CALL</font><br>
<font color="#000000">echo_on_fault</font>(<font
color="#000000">axis2_svc_skeleton_t</font> *<font
color="#000000">svc_skeli</font>, <br>
              <font color="#000000">axis2_env_t</font> **<font
color="#000000">env</font>, <font
color="#000000">axis2_om_node_t</font> *<font color="#000000">node</font>)<br>
{<br>
   <font
color="#808080"><i>/* Here we are just setting a simple error message inside an element <br>
    * called 'EchoServiceError' <br>
    */</i></font><br>
    <font color="#000000">axis2_om_node_t</font> *<font
color="#000000">error_node</font> = <font color="#000000">NULL</font>;<br>
    <font color="#000000">axis2_om_node_t</font>* <font
color="#000000">text_node</font> = <font color="#000000">NULL</font>;<br>
    <font color="#000000">axis2_om_element_t</font> *<font
color="#000000">error_ele</font> = <font color="#000000">NULL</font>;<br>
    <font color="#000000">error_ele</font> = <font
color="#000000">axis2_om_element_create</font>(<font
color="#000000">env</font>, <font color="#000000">node</font>, <font
color="#FF0000">"EchoServiceError"</font>, <font
color="#000000">NULL</font>, <br>
        &amp;<font color="#000000">error_node</font>);<br>
    <font color="#000000">AXIS2_OM_ELEMENT_SET_TEXT</font>(<font
color="#000000">error_ele</font>, <font color="#000000">env</font>, <font
color="#FF0000">"Echo service failed "</font>, <br>
        <font color="#000000">text_node</font>);<br>
    <font color="#000000"><b>return</b></font> <font
color="#000000">error_node</font>;<br>
}<br>
<br>
<font color="#808080"><i>/* Free the resources used */</i></font><br>
<font color="#800000">int</font> <font color="#000000">AXIS2_CALL</font><br>
<font color="#000000">echo_free</font>(<font
color="#000000">axis2_svc_skeleton_t</font> *<font
color="#000000">svc_skeleton</font>,<br>
            <font color="#000000">axis2_env_t</font> **<font
color="#000000">env</font>)<br>
{<br>
    <font color="#808080"><i>/* Free the function array */</i></font><br>
    <font color="#000000"><b>if</b></font>(<font
color="#000000">svc_skeleton</font>-&gt;<font
color="#000000">func_array</font>)<br>
    {<br>
        <font color="#000000">AXIS2_ARRAY_LIST_FREE</font>(<font
color="#000000">svc_skeleton</font>-&gt;<font
color="#000000">func_array</font>, <font color="#000000">env</font>);<br>
        <font color="#000000">svc_skeleton</font>-&gt;<font
color="#000000">func_array</font> = <font color="#000000">NULL</font>;<br>
    }<br>
    <br>
    <font color="#808080"><i>/* Free the function array */</i></font><br>
    <font color="#000000"><b>if</b></font>(<font
color="#000000">svc_skeleton</font>-&gt;<font color="#000000">ops</font>)<br>
    {<br>
        <font color="#000000">AXIS2_FREE</font>((*<font
color="#000000">env</font>)-&gt;<font color="#000000">allocator</font>, <font
color="#000000">svc_skeleton</font>-&gt;<font color="#000000">ops</font>);<br>
        <font color="#000000">svc_skeleton</font>-&gt;<font
color="#000000">ops</font> = <font color="#000000">NULL</font>;<br>
    }<br>
    <br>
    <font color="#808080"><i>/* Free the service skeleton */</i></font><br>
    <font color="#000000"><b>if</b></font>(<font
color="#000000">svc_skeleton</font>)<br>
    {<br>
        <font color="#000000">AXIS2_FREE</font>((*<font
color="#000000">env</font>)-&gt;<font color="#000000">allocator</font>, <font
color="#000000">svc_skeleton</font>);<br>
        <font color="#000000">svc_skeleton</font> = <font
color="#000000">NULL</font>;<br>
    }<br>
<br>
    <font color="#000000"><b>return</b></font> <font
color="#000000">AXIS2_SUCCESS</font>; <br>
}<br>
</p>

<p>Now we can write the create function of the echo_service_skeleton as<br>
follows.</p>

<p><font color="#808080"><i>/*Create function */<br>
</i></font> <font color="#000000">axis2_svc_skeleton_t</font> *<br>
<font color="#000000">axis2_echo_create</font>(<font
color="#000000">axis2_env_t</font> **<font color="#000000">env</font>)<br>
{<br>
    <font color="#000000">axis2_svc_skeleton_t</font> *<font
color="#000000">svc_skeleton</font> = <font color="#000000">NULL</font>;<br>
    <font
color="#808080"><i>/* Allocate memory for the structs */</i></font><br>
    <font color="#000000">svc_skeleton</font> = <font
color="#000000">AXIS2_MALLOC</font>((*<font
color="#000000">env</font>)-&gt;<font color="#000000">allocator</font>, <br>
        <font color="#000000"><b>sizeof</b></font>(<font
color="#000000">axis2_svc_skeleton_t</font>));<br>
<br>
    <font color="#000000">svc_skeleton</font>-&gt;<font
color="#000000">ops</font> = <font color="#000000">AXIS2_MALLOC</font>(<br>
        (*<font color="#000000">env</font>)-&gt;<font
color="#000000">allocator</font>, <font
color="#000000"><b>sizeof</b></font>(<font
color="#000000">axis2_svc_skeleton_ops_t</font>));<br>
<br>
    <font color="#808080"><i>/* Assign function pointers */</i></font><br>
    <font color="#000000">svc_skeleton</font>-&gt;<font
color="#000000">ops</font>-&gt;<font color="#000000">free</font> = <font
color="#000000">echo_free</font>;<br>
    <font color="#000000">svc_skeleton</font>-&gt;<font
color="#000000">ops</font>-&gt;<font color="#000000">init</font> = <font
color="#000000">echo_init</font>;<br>
    <font color="#000000">svc_skeleton</font>-&gt;<font
color="#000000">ops</font>-&gt;<font color="#000000">invoke</font> = <font
color="#000000">echo_invoke</font>;<br>
    <font color="#000000">svc_skeleton</font>-&gt;<font
color="#000000">ops</font>-&gt;<font color="#000000">on_fault</font> = <font
color="#000000">echo_on_fault</font>;<br>
<br>
    <font color="#000000"><b>return</b></font> <font
color="#000000">svc_skeleton</font>;<br>
}</p>

<p></p>

<p>In addition to the above functions every service must have the following
two functions with exactly the same function signature as in xxx_skeleton.c
file.</p>
<br>


<p><font color="#000000">AXIS2_EXPORT</font> <font
color="#800000">int</font> <br>
<font color="#000000">axis2_get_instance</font>(<font
color="#000000">axis2_svc_skeleton_t</font> **<font
color="#000000">inst</font>,<br>
                   <font color="#000000">axis2_env_t</font> **<font
color="#000000">env</font>)<br>
{<br>
    *<font color="#000000">inst</font> = <font
color="#000000">axis2_echo_create</font>(<font
color="#000000">env</font>);<br>
    <font color="#000000"><b>if</b></font>(!(*<font
color="#000000">inst</font>))<br>
    {<br>
        <font color="#000000"><b>return</b></font> <font
color="#000000">AXIS2_FAILURE</font>;<br>
    }<br>
    <font color="#000000"><b>return</b></font> <font
color="#000000">AXIS2_SUCCESS</font>;<br>
}<br>
<br>
<font color="#000000">AXIS2_EXPORT</font> <font
color="#800000">int</font> <br>
<font color="#000000">axis2_remove_instance</font>(<font
color="#000000">axis2_svc_skeleton_t</font> *<font
color="#000000">inst</font>,<br>
                      <font color="#000000">axis2_env_t</font> **<font
color="#000000">env</font>)<br>
{<br>
    <font color="#000000">axis2_status_t</font> <font
color="#000000">status</font> = <font
color="#000000">AXIS2_FAILURE</font>;<br>
    <font color="#000000"><b>if</b></font> (<font
color="#000000">inst</font>)<br>
    {<br>
        <font color="#000000">status</font> = <font
color="#000000">AXIS2_SVC_SKELETON_FREE</font>(<font
color="#000000">inst</font>, <font color="#000000">env</font>);<br>
    }<br>
    <font color="#000000"><b>return</b></font> <font
color="#000000">status</font>;<br>
}<br>
</p>

<p>Axis2/C engine can load the service dll, however, it needs to know which
method to call. Since C does not have reflection, we need to have some dll
exposed functions known to Axis2/C engine. <b>axis2_get_instance</b> and
<b>axis2_remove_instance</b> are the two functions that need to be exposed
from a service dll (or any other dll of Axis2/C engine). Axis2/C engine calls
axis2_get_instance method, which creates a new service instance, an cast the
return pointer to axis2_svc_skeleton interface.Then the interface methods can
be called by Axis2/C engine.</p>
<a name="Step2"></a>

<h4>Step2 : Now we can write the echo service in a file echo.c</h4>
<a name="Step3">axis2_om_node_t *<br>
<font color="#000000">axis2_echo_echo</font> (<font
color="#000000">axis2_env_t</font> **<font color="#000000">env</font>, <font
color="#000000">axis2_om_node_t</font> *<font color="#000000">node</font>)<br>
{<br>
    <font color="#000000">axis2_om_node_t</font> *<font
color="#000000">text_parent_node</font> = <font
color="#000000">NULL</font>;<br>
    <font color="#000000">axis2_om_node_t</font> *<font
color="#000000">text_node</font> = <font color="#000000">NULL</font>;<br>
    <font color="#000000">axis2_om_node_t</font> *<font
color="#000000">ret_node</font> = <font color="#000000">NULL</font>;<br>
<br>
    <font color="#000000">AXIS2_ENV_CHECK</font>(<font
color="#000000">env</font>, <font color="#000000">NULL</font>);<br>
   <br>
    <font color="#808080"><i>/* Expected request format is :-<br>
     * &lt;ns1:echoString xmlns:ns1="http://localhost:9090/axis2/services/echo"&gt;<br>
     *      &lt;text&gt;echo5&lt;/text&gt;<br>
     * &lt;/ns1:echoString&gt;<br>
     */</i></font><br>
    <font color="#000000"><b>if</b></font> (!<font
color="#000000">node</font>) <font
color="#808080"><i>/* 'echoString' node */</i></font><br>
    {<br>
        <font color="#000000">AXIS2_ERROR_SET</font>((*<font
color="#000000">env</font>)-&gt;<font color="#000000">error</font>, <font
color="#000000">AXIS2_ERROR_SVC_SKEL_INPUT_OM_NODE_NULL</font>, <font
color="#000000">AXIS2_FAILURE</font>);<br>
        <font color="#000000">printf</font>(<font
color="#FF0000">"Echo client ERROR: input parameter NULL\n"</font>);<br>
        <font color="#000000"><b>return</b></font> <font
color="#000000">NULL</font>;<br>
    }<br>
<br>
    <font color="#000000">text_parent_node</font> = <font
color="#000000">AXIS2_OM_NODE_GET_FIRST_CHILD</font>(<font
color="#000000">node</font>, <font color="#000000">env</font>);<br>
    <font color="#000000"><b>if</b></font> (!<font
color="#000000">text_parent_node</font>) <font
color="#808080"><i>/* 'text' node */</i></font><br>
    {<br>
        <font color="#000000">AXIS2_ERROR_SET</font>((*<font
color="#000000">env</font>)-&gt;<font color="#000000">error</font>, <font
color="#000000">AXIS2_ERROR_SVC_SKEL_INVALID_XML_FORMAT_IN_REQUEST</font>, <font
color="#000000">AXIS2_FAILURE</font>);<br>
        <font color="#000000">printf</font>(<font
color="#FF0000">"Echo client ERROR: invalid XML in request\n"</font>);<br>
        <font color="#000000"><b>return</b></font> <font
color="#000000">NULL</font>;<br>
    }<br>
    <br>
    <font color="#000000">text_node</font> = <font
color="#000000">AXIS2_OM_NODE_GET_FIRST_CHILD</font>(<font
color="#000000">text_parent_node</font>, <font
color="#000000">env</font>);<br>
    <font color="#000000"><b>if</b></font> (!<font
color="#000000">text_node</font>) <font
color="#808080"><i>/* actual text to echo */</i></font><br>
    {<br>
        <font color="#000000">AXIS2_ERROR_SET</font>((*<font
color="#000000">env</font>)-&gt;<font color="#000000">error</font>, <font
color="#000000">AXIS2_ERROR_SVC_SKEL_INVALID_XML_FORMAT_IN_REQUEST</font>, <font
color="#000000">AXIS2_FAILURE</font>);<br>
        <font color="#000000">printf</font>(<font
color="#FF0000">"Echo client ERROR: invalid XML in request\n"</font>);<br>
        <font color="#000000"><b>return</b></font> <font
color="#000000">NULL</font>;<br>
    }<br>
    <br>
    <font color="#000000"><b>if</b></font> (<font
color="#000000">AXIS2_OM_NODE_GET_NODE_TYPE</font>(<font
color="#000000">text_node</font>, <font color="#000000">env</font>) == <font
color="#000000">AXIS2_OM_TEXT</font>)<br>
    {<br>
        <font color="#000000">axis2_om_text_t</font> *<font
color="#000000">text</font> = (<font
color="#000000">axis2_om_text_t</font> *)<font
color="#000000">AXIS2_OM_NODE_GET_DATA_ELEMENT</font>(<font
color="#000000">text_node</font>, <font color="#000000">env</font>);<br>
        <font color="#000000"><b>if</b></font>( <font
color="#000000">text</font> &amp;&amp; <font
color="#000000">AXIS2_OM_TEXT_GET_VALUE</font>(<font
color="#000000">text</font> , <font color="#000000">env</font>))<br>
        {<br>
            <font color="#000000">axis2_char_t</font> *<font
color="#000000">text_str</font> = <font
color="#000000">AXIS2_OM_TEXT_GET_VALUE</font>(<font
color="#000000">text</font>, <font color="#000000">env</font>);<br>
            <font color="#000000">printf</font>(<font
color="#FF0000">"Echoing text value  %s \n"</font>, <font
color="#000000">text_str</font>);<br>
            <font color="#000000">ret_node</font> = <font
color="#000000">build_om_programatically</font>(<font
color="#000000">env</font>, <font color="#000000">text_str</font>);<br>
        }<br>
    }<br>
    <font color="#000000"><b>else</b></font><br>
    {<br>
        <font color="#000000">AXIS2_ERROR_SET</font>((*<font
color="#000000">env</font>)-&gt;<font color="#000000">error</font>, <font
color="#000000">AXIS2_ERROR_SVC_SKEL_INVALID_XML_FORMAT_IN_REQUEST</font>, <font
color="#000000">AXIS2_FAILURE</font>);<br>
        <font color="#000000">printf</font>(<font
color="#FF0000">"Echo client ERROR: invalid XML in request\n"</font>);<br>
        <font color="#000000"><b>return</b></font> <font
color="#000000">NULL</font>;<br>
    }<br>
        <br>
    <font color="#000000"><b>return</b></font> <font
color="#000000">ret_node</font>;<br>
}<br>
<br>
<font color="#808080"><i>/* Builds the response content */</i></font><br>
<font color="#000000">axis2_om_node_t</font> *<br>
<font color="#000000">build_om_programatically</font>(<font
color="#000000">axis2_env_t</font> **<font color="#000000">env</font>, <font
color="#000000">axis2_char_t</font> *<font color="#000000">text</font>)<br>
{<br>
    <font color="#000000">axis2_om_node_t</font> *<font
color="#000000">echo_om_node</font> = <font color="#000000">NULL</font>;<br>
    <font color="#000000">axis2_om_element_t</font>* <font
color="#000000">echo_om_ele</font> = <font color="#000000">NULL</font>;<br>
    <font color="#000000">axis2_om_node_t</font>* <font
color="#000000">text_om_node</font> = <font color="#000000">NULL</font>;<br>
    <font color="#000000">axis2_om_element_t</font> * <font
color="#000000">text_om_ele</font> = <font color="#000000">NULL</font>;<br>
    <font color="#000000">axis2_om_namespace_t</font> *<font
color="#000000">ns1</font> = <font color="#000000">NULL</font>;<br>
    <br>
    <font color="#000000">ns1</font> = <font
color="#000000">axis2_om_namespace_create</font> (<font
color="#000000">env</font>, <font
color="#FF0000">"http://localhost:9090/axis2/services/echo"</font>, <font
color="#FF0000">"ns1"</font>);<br>
<br>
    <font color="#000000">echo_om_ele</font> = <font
color="#000000">axis2_om_element_create</font>(<font
color="#000000">env</font>, <font color="#000000">NULL</font>, <font
color="#FF0000">"echoString"</font>, <font
color="#000000">ns1</font>, &amp;<font
color="#000000">echo_om_node</font>);<br>
    <br>
    <font color="#000000">text_om_ele</font> = <font
color="#000000">axis2_om_element_create</font>(<font
color="#000000">env</font>, <font color="#000000">echo_om_node</font>, <font
color="#FF0000">"text"</font>, <font color="#000000">NULL</font>, &amp;<font
color="#000000">text_om_node</font>);<br>
<br>
    <font color="#000000">AXIS2_OM_ELEMENT_SET_TEXT</font>(<font
color="#000000">text_om_ele</font>, <font color="#000000">env</font>, <font
color="#000000">text</font>, <font color="#000000">text_om_node</font>);<br>
    <br>
    <font color="#000000"><b>return</b></font> <font
color="#000000">echo_om_node</font>;<br>
}<br>
</a>

<h4>Step3 :Write the services.xml file</h4>

<p>Axis2/C uses "services.xml" to keep configurations for a Web Service. Each
Web Service deployed in Axis2/C needs a "services.xml" containing the
configurations. Note that services.xml has the same semantics as Axis2 Java's
services.xml file. Only difference is that for class attributes instead of
giving package qualified class name, we use dll name. services.xml for echo
will be as follows.</p>
<pre class="code">&lt;service name="echo"&gt;
    &lt;parameter name="ServiceClass" locked="xsd:false"&gt;echo&lt;/parameter&gt;
    &lt;description&gt;
        This is a echo service
    &lt;/description&gt;

    &lt;operation name="echoString"&gt;
        &lt;parameter name="wsamapping"&gt;
            http://localhost:9090/axis2/services/echo/echoString
        &lt;/parameter&gt;
    &lt;/operation&gt;
&lt;/service&gt;</pre>

<p><em></em></p>
Name of the service will be the name of the Folder with the shared library
and the services.xml , in this example case we will have a folder named echo
in which we have the echo.dll (or libecho.so on Linux platform) and
services.xml file.

<p>You can write a services.xml file to include a group of services instead
of a single service. This makes management and deployment of a set of related
services very easy. At runtime you can share information between these
services within a single interaction using the axis2_svc_grp_ctx (Service
Group Context ). If you hope to use this functionality, the services.xml file
should have following format.<br>
</p>
<pre class="code">&lt;serviceGroup&gt;
  &lt;service name="Service1"&gt;
    &lt;!-- details for Service1 --&gt;
  &lt;/service&gt;<br>  &lt;service name="Service2"&gt;
    &lt;!-- details for Service2 --&gt;
  &lt;/service&gt;
  &lt;module ref="ModuleName" /&gt;
  &lt;parameter name="serviceGroupParam1" locked="false"&gt;value 1&lt;/parameter&gt;
&lt;/serviceGroup&gt;</pre>

<p>Note : name of the service is a compulsory attribute</p>
<a name="Step4"></a>

<h4>Step4 :Create the Web Service Folder in services folder of the
repository.</h4>

<p>In Axis2/C , it is required to create a folder with the corresponding
service/service group name which will contain the shared library (compiled
service) and the services.xml file which describe the web service. So in this
example case we will have a folder named echo which contain the services,xml
file and echo dll.</p>
<a name="deploy"></a>

<h3>Deploy the Web Service</h3>

<p>Deploying the service means putting the service folder to the services
directory. At the moment the server has to be restarted for the service to be
deployed since hot deployment has not yet been implemented.</p>

<p align="right"><a href="userguide2.html"><img
src="images/arrow_left.gif"><br>
Previous Page</a></p>

<p>Pages: <a href="userguide.html">Content</a>, <a
href="userguide1.html">1</a>, <a href="userguide2.html">2</a>, <b>3</b></p>
</body>
</html>
