<?xml version="1.0" encoding="UTF-8"?>
<!-- HTTP/2 Pure JSON Camera Control Service Configuration (No SOAP/XML dependencies) -->
<serviceGroup>
    <service name="CameraControlService">
        <description>
            Apache Axis2/C HTTP/2 Generic Camera Control Service
            Generic camera operations with user-implementable stub functions
            Uses pure json-c library (no XML/SOAP dependencies)

            IMPLEMENTATION NOTE:
            This service provides STUB implementations only. Users must implement
            camera-specific integration functions for their target camera system.
            See implementation guide for examples: OpenCamera JNI, V4L2, IP cameras.
        </description>

        <serviceClass>camera_control_service</serviceClass>
        <parameter name="ServiceClass">camera_control_service</parameter>

        <!-- HTTP/2 transport configuration -->
        <parameter name="transport.h2">
            <parameter name="enableHTTP2">true</parameter>
            <parameter name="enableStreaming">true</parameter>
            <parameter name="enableMemoryOptimization">true</parameter>
            <parameter name="maxFrameSize">16384</parameter>
            <parameter name="maxConcurrentStreams">50</parameter>
        </parameter>

        <!-- JSON processing configuration - Pure json-c library (no XML/SOAP deps) -->
        <parameter name="maxJSONPayloadSize">1048576</parameter>
        <parameter name="jsonProcessingMode">pure-jsonc</parameter>

        <!-- Camera service specific settings -->
        <parameter name="maxRecordingDuration">7200</parameter>  <!-- 2 hours max -->
        <parameter name="defaultVideoQuality">1080p</parameter>
        <parameter name="defaultVideoFormat">mp4</parameter>
        <parameter name="enableConcurrentRecording">false</parameter>

        <!-- HTTP/2 JSON Operation: startRecording -->
        <operation name="startRecording">
            <description>
                Start camera recording with specified parameters.
                Accepts clip_name, quality, duration, and format parameters.

                STUB IMPLEMENTATION: Users must implement camera_device_start_recording_impl()
                function with camera-specific integration code.

                Example JSON Request:
                {
                    "action": "start_recording",
                    "clip_name": "meeting_001",
                    "quality": "1080p",
                    "duration": 3600,
                    "format": "mp4"
                }
            </description>
            <messageReceiver class="axis2_json_rpc_msg_recv"/>

            <!-- REST-style HTTP mapping -->
            <parameter name="httpMethod">POST</parameter>
            <parameter name="httpPath">/startRecording</parameter>
            <parameter name="contentType">application/json</parameter>
            <parameter name="responseType">application/json</parameter>
        </operation>

        <!-- HTTP/2 JSON Operation: stopRecording -->
        <operation name="stopRecording">
            <description>
                Stop active camera recording.

                STUB IMPLEMENTATION: Users must implement camera_device_stop_recording_impl()
                function with camera-specific integration code.

                Example JSON Request:
                {
                    "action": "stop_recording"
                }
            </description>
            <messageReceiver class="axis2_json_rpc_msg_recv"/>

            <!-- REST-style HTTP mapping -->
            <parameter name="httpMethod">POST</parameter>
            <parameter name="httpPath">/stopRecording</parameter>
            <parameter name="contentType">application/json</parameter>
            <parameter name="responseType">application/json</parameter>
        </operation>

        <!-- HTTP/2 JSON Operation: getStatus -->
        <operation name="getStatus">
            <description>
                Get current camera status and recording information.

                STUB IMPLEMENTATION: Users must implement camera_device_get_status_impl()
                function with camera-specific integration code.

                Example JSON Request:
                {
                    "action": "get_status"
                }

                Example JSON Response:
                {
                    "success": true,
                    "state": "recording",
                    "active_clip": "meeting_001",
                    "recording_duration": 1230,
                    "last_error": "none"
                }
            </description>
            <messageReceiver class="axis2_json_rpc_msg_recv"/>

            <!-- REST-style HTTP mapping -->
            <parameter name="httpMethod">POST</parameter>
            <parameter name="httpPath">/getStatus</parameter>
            <parameter name="contentType">application/json</parameter>
            <parameter name="responseType">application/json</parameter>
        </operation>

        <!-- HTTP/2 JSON Operation: configureSettings -->
        <operation name="configureSettings">
            <description>
                Configure camera settings (resolution, fps, codec, bitrate, audio).

                STUB IMPLEMENTATION: Users must implement camera_device_configure_settings_impl()
                function with camera-specific integration code.

                Example JSON Request:
                {
                    "action": "configure_settings",
                    "resolution": "1920x1080",
                    "fps": "30",
                    "codec": "h264",
                    "bitrate": "5000000",
                    "audio_source": "microphone"
                }
            </description>
            <messageReceiver class="axis2_json_rpc_msg_recv"/>

            <!-- REST-style HTTP mapping -->
            <parameter name="httpMethod">POST</parameter>
            <parameter name="httpPath">/configureSettings</parameter>
            <parameter name="contentType">application/json</parameter>
            <parameter name="responseType">application/json</parameter>
        </operation>

        <!-- HTTP/2 JSON Operation: sftpTransfer -->
        <operation name="sftpTransfer">
            <description>
                Transfer recorded files via SFTP using PKI (passwordless) authentication.

                STUB IMPLEMENTATION: Users must implement camera_device_sftp_transfer_impl()
                function with SFTP client integration code.

                This operation enables secure transfer of camera recordings to remote servers
                using SSH public key authentication, eliminating password-based authentication.

                Example JSON Request:
                {
                    "action": "sftp_transfer",
                    "hostname": "backup.example.com",
                    "username": "camera_user",
                    "private_key_path": "/home/camera/.ssh/id_rsa",
                    "local_file_path": "/tmp/recording_001.mp4",
                    "remote_path": "/backups/camera/",
                    "port": 22
                }

                Implementation Requirements:
                - SSH private key must be accessible and have proper permissions (600)
                - Remote host must have the corresponding public key in authorized_keys
                - SFTP subsystem must be enabled on remote server
                - Network connectivity to remote host on specified port
            </description>
            <messageReceiver class="axis2_json_rpc_msg_recv"/>

            <!-- REST-style HTTP mapping -->
            <parameter name="httpMethod">POST</parameter>
            <parameter name="httpPath">/sftpTransfer</parameter>
            <parameter name="contentType">application/json</parameter>
            <parameter name="responseType">application/json</parameter>
        </operation>

        <!-- HTTP/2 JSON Operation: listFiles -->
        <operation name="listFiles">
            <description>
                List video files on the camera device storage.

                STUB IMPLEMENTATION: Users must implement camera_device_list_files_impl()
                function with storage-specific integration code.

                Returns a list of video files with metadata (name, size, modified timestamp).
                Supports optional pattern filtering.

                Example JSON Request:
                {
                    "action": "list_files"
                }

                Or with pattern filter:
                {
                    "action": "list_files",
                    "pattern": "*.mp4"
                }

                Example JSON Response:
                {
                    "success": true,
                    "file_count": 2,
                    "total_size": 293020170,
                    "directory": "/storage/emulated/0/DCIM/OpenCamera",
                    "files": [
                        {"name": "VID_20260104_105049.mp4", "size": 178613590, "modified": "2026-01-04 10:51:36"},
                        {"name": "VID_20260104_112809.mp4", "size": 114406580, "modified": "2026-01-04 11:28:55"}
                    ]
                }

                Pattern support (reference: Kanaha implementation):
                - Empty/NULL: List all video files
                - "*.mp4": List files matching wildcard
                - "today": List files from current date
                - "YYYY-MM-DD": List files from specific date

                NOTE: Action name accepts both "list_files" (snake_case) and "listFiles" (camelCase)
            </description>
            <messageReceiver class="axis2_json_rpc_msg_recv"/>

            <!-- REST-style HTTP mapping -->
            <parameter name="httpMethod">POST</parameter>
            <parameter name="httpPath">/listFiles</parameter>
            <parameter name="contentType">application/json</parameter>
            <parameter name="responseType">application/json</parameter>
        </operation>

        <!-- HTTP/2 JSON Operation: deleteFiles -->
        <operation name="deleteFiles">
            <description>
                Delete video files from the camera device storage.

                STUB IMPLEMENTATION: Users must implement camera_device_delete_files_impl()
                function with storage-specific integration code.

                Deletes files matching the specified pattern. Pattern is required.

                Example JSON Request:
                {
                    "action": "delete_files",
                    "pattern": "VID_20260104_105049.mp4"
                }

                Pattern support (reference: Kanaha implementation):
                - Specific file: "VID_20260104_105049.mp4"
                - Wildcard: "*.mp4", "VID_2026*"
                - Date: "2026-01-04" (all files from that date)
                - Today: "today" (all files from current date)
                - All: "*" (delete all video files)

                Example JSON Response:
                {
                    "success": true,
                    "message": "Files deleted successfully"
                }

                SECURITY NOTE: Implementation should validate patterns to prevent:
                - Path traversal attacks (reject patterns containing "..")
                - Deletion outside video directory

                NOTE: Action name accepts both "delete_files" (snake_case) and "deleteFiles" (camelCase)
            </description>
            <messageReceiver class="axis2_json_rpc_msg_recv"/>

            <!-- REST-style HTTP mapping -->
            <parameter name="httpMethod">POST</parameter>
            <parameter name="httpPath">/deleteFiles</parameter>
            <parameter name="contentType">application/json</parameter>
            <parameter name="responseType">application/json</parameter>
        </operation>

    </service>
</serviceGroup>